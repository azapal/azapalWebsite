import{d as D,c as u,k as a,b as e,v as x,r as c,w as N,j as F,e as d,l as y,i as _,u as g,F as T,q as I,n as B,g as M,z as w,A as k,p as q,y as E}from"./index-DTq0z6UM.js";import{_ as G}from"./success-DnTFUcrJ.js";import{n as L,S as H}from"./storeUtils-BBgzQjYe.js";import{g as R,a as O}from"./firebase-BP1qBO44.js";import{c as W}from"./businessRequest-1E3WS6yi.js";import{F as K}from"./FormLayout-DRp6FriA.js";import{C as P}from"./chevron-left-CMZ05kCD.js";import{c as j}from"./createLucideIcon-BHDqzYJA.js";import{_ as Y}from"./DashboardLayout-Bz6hHOll.js";import{C as J,a as Q}from"./chevrons-up-down-DMe1vY8A.js";import"./HeaderNav.vue_vue_type_script_setup_true_lang-C1TlxRfI.js";import"./menu-CBHz9SqF.js";import"./check-check-yH6gVVAh.js";/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=j("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=j("locate-fixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=j("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=j("scan-search",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]),se=(v={})=>new Promise((p,n)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{p(l.coords)},l=>{n(l)},v):n(new Error("Geolocation is not supported on your device"))}),oe="/assets/undraw_map-dark_g9xq-CYCrVVhL.svg",re={class:"flex items-start space-x-3 p-4 bg-white rounded-xl border border-gray-200"},ne={class:"text-sm font-medium text-gray-900"},le={class:"mt-1 text-xs text-gray-500"},ae=D({__name:"InfoComponent",props:{content:String,title:Screen},setup(v){const p=v;return(n,l)=>(a(),u("div",re,[l[0]||(l[0]=e("div",{class:"p-1 bg-blue-100 rounded-full"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[e("h3",ne,x(p.title),1),e("p",le,x(p.content),1)])]))}}),ie={class:"flex flex-col max-w-lg mx-auto p-4 sm:p-6 md:p-8"},ue={class:"flex items-center border mt-4 border-gray-300 rounded-lg px-3 py-2 focus-within:ring-2 focus-within:ring-indigo-400 mb-4"},de=["value"],ce={key:0,class:"flex justify-center my-4"},pe={class:"flex flex-col gap-2 overflow-y-auto max-h-[60vh]"},me={key:0},fe=["onClick"],ge={class:"font-medium text-sm sm:text-base"},ye={class:"text-gray-500 text-xs sm:text-sm line-clamp-2"},xe={key:1},ve={key:2,class:"flex flex-col items-center justify-center text-center py-8 text-gray-400"},A="AIzaSyCJHtS9C4SsTAIKZqeFqFg8RHSbW015jFk",be={__name:"AddressComponent",emits:["location"],setup(v,{emit:p}){const n=c(""),l=c([]),o=c(!1),b=c(h(16)),C=p;function h(r){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let f="";for(let i=0;i<r;i++)f+=s.charAt(Math.floor(Math.random()*s.length));return f}function U(){n.value="",l.value=[]}async function V(){console.log("Use current location clicked");try{const{latitude:r,longitude:s}=await se({enableHighAccuracy:!0,timeout:5e3});r&&s?C("location",{latitude:r,longitude:s}):L("cant get your location at the moment","error")}catch(r){L(r.message,"error")}}let $;N(n,r=>{clearTimeout($),r.length>2?$=setTimeout(m,300):l.value=[]});async function m(){o.value=!0;try{const s=await(await fetch(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(n.value)}&types=address&language=en&key=${A}&sessiontoken=${b.value}`)).json();console.log(s),l.value=s.predictions||[]}catch(r){console.error("Error fetching predictions",r)}finally{o.value=!1}}async function t(r,s){o.value=!0;try{const i=await(await fetch(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${r}&fields=geometry,formatted_address&key=${A}&sessiontoken=${b.value}`)).json();if(console.log(i),i.result){const S={id:r,name:s.split(",")[0],address:i.result.formatted_address,latitude:i.result.geometry.location.lat,longitude:i.result.geometry.location.lng};console.log("Selected address:",S),n.value="",l.value=[],b.value=h(16)}}catch(f){console.error("Error fetching place details",f)}finally{o.value=!1}}return(r,s)=>{const f=F("router-link");return a(),u("div",ie,[d(f,{to:"/business/vendor",class:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 mb-4"},{default:_(()=>[d(g(P)),s[1]||(s[1]=e("span",{class:"text-lg font-semibold"},"Back",-1))]),_:1}),s[6]||(s[6]=e("h2",{class:"text-xl sm:text-2xl font-bold mb-4"},"Enter your physical shop address",-1)),d(ae,{title:"Don't have a shop address?",content:"If you dont have a shop address, enter your physical address. This information will be used by the dispatch/logistic company whenever required"}),e("div",ue,[d(g(te)),e("input",{type:"text",class:"flex-1 bg-transparent outline-none ml-2 text-gray-800 placeholder-gray-400 text-sm sm:text-base",placeholder:"Enter your address",value:n.value,onInput:s[0]||(s[0]=i=>n.value=i.target.value)},null,40,de),n.value?(a(),u("button",{key:0,onClick:U},[d(g(X))])):y("",!0)]),o.value?(a(),u("div",ce,s[2]||(s[2]=[e("span",{class:"text-sm text-indigo-500"},"searching...",-1)]))):y("",!0),e("div",pe,[l.value.length>0?(a(),u("div",me,[s[3]||(s[3]=e("p",{class:"text-sm text-gray-500 mb-1"},"Google Suggestions",-1)),(a(!0),u(T,null,I(l.value,i=>{var S,z;return a(),u("div",{key:i.place_id,class:"flex items-start gap-2 p-3 rounded-lg hover:bg-gray-50 cursor-pointer border border-transparent hover:border-gray-200",onClick:Fe=>t(i.place_id,i.description)},[d(g(ee)),e("div",null,[e("p",ge,x(((S=i.structured_formatting)==null?void 0:S.main_text)||i.description.split(",")[0]),1),e("p",ye,x(((z=i.structured_formatting)==null?void 0:z.secondary_text)||i.description),1)])],8,fe)}),128))])):n.value?y("",!0):(a(),u("div",xe,[e("button",{class:"flex items-center gap-2 p-3 rounded-lg hover:bg-gray-50 border border-transparent hover:border-gray-200 text-left w-full",onClick:V},[d(g(Z)),s[4]||(s[4]=e("span",{class:"font-medium text-sm sm:text-base"},"Use your current location",-1))])])),n.value&&!o.value&&l.value.length===0?(a(),u("div",ve,s[5]||(s[5]=[e("div",{class:"flex flex-col justify-center items-center"},[e("img",{class:"w-[100px]",src:oe,alt:"map"}),e("p",{class:"mt-2 text-sm"},"No addresses match your search")],-1)]))):y("",!0)])])}}},he={key:0,class:"bg-white w-full bg-opacity-50 flex items-start justify-center z-50 lg:p-4"},we={class:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},ke={class:"px-6 pt-5 relative flex flex-col items-center gap-5"},_e={class:"relative"},Ce={class:"block mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600"},$e={class:"block mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600"},Se={class:"space-y-2 mb-5"},Be={class:"relative"},Le={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},je={class:"py-1"},Ue=["onClick"],Ve={class:"block mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600"},ze={class:"block mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600"},Me={class:"block mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600"},qe={class:"mt-6"},Ee={key:0,class:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"},Ae={key:1,type:"submit",class:"w-full p-2 rounded-full bg-[#2563EB] cursor-pointer text-white"},Qe={__name:"CreateVendor.form",setup(v){R(O),c(null);const p=H,n=c(!1);p.get("auth","getCurrentUser");const l=c(!1),o=c(W),b=[{key:"Shoes/Wears",value:"shoes_wears"},{key:"Stationaries",value:"stationaries"},{key:"Food/Bakeries",value:"food_bakeries"}],C=c(!1),h=c("1"),U=m=>{o.value.location=m.latitude+", "+m.longitude,h.value="2",console.log(o.value)},V=async()=>{if(n.value=!0,o.value.category="seller",o.value.location){const m={...o.value};try{const t=await p.dispatch("business","createBusiness",m);let r=t.data;r.code==="00"?C.value=!0:L(r.message,"error"),n.value=!1,console.log(t)}catch(t){n.value=!1,console.log(t)}}else n.value=!1,L("your location is required to smoother operative, please be where your products are most likely to be.")},$=m=>{o.value.product_category=m,l.value=!1,console.log(o.value)};return(m,t)=>{const r=F("router-link");return a(),B(Y,null,{content:_(()=>[h.value==="1"?(a(),B(be,{key:0,onLocation:U})):(a(),B(K,{key:1},{form:_(()=>[C.value?(a(),u("div",he,[e("div",we,[t[9]||(t[9]=e("div",{class:"flex justify-center w-full"},null,-1)),e("div",ke,[t[7]||(t[7]=e("img",{src:G,class:"w-38",alt:"success-img"},null,-1)),t[8]||(t[8]=e("section",{class:"text-center"},[e("h2",{class:"text-2xl font-semibold text-gray-900"},"Hey!"),e("h3",{class:"text-xl font-semibold text-gray-900"},"That was a success.")],-1)),d(r,{to:"/business/vendor",class:"w-full text-black underline rounded-[18px] p-3 text-center"},{default:_(()=>t[6]||(t[6]=[M("Go to business dashboard")])),_:1})])])])):(a(),u("form",{key:1,onSubmit:E(V,["prevent"]),class:"w-full"},[e("div",_e,[d(r,{to:"/business/vendor",class:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 mb-4"},{default:_(()=>[d(g(P)),t[10]||(t[10]=e("span",{class:"text-lg font-semibold"},"Back",-1))]),_:1}),t[17]||(t[17]=e("h1",{class:"text-2xl font-bold mb-8"},"Let's start simple.",-1)),e("div",null,[e("label",Ce,[t[11]||(t[11]=e("span",{class:"text-xs font-medium text-gray-700"},"Business name",-1)),w(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.name=s),placeholder:"Enter Business name",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,512),[[k,o.value.name]])]),e("label",$e,[t[12]||(t[12]=e("span",{class:"text-xs font-medium text-gray-700"},"Business description",-1)),w(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.description=s),placeholder:"Tell us what you sell or do",class:"mt-1 w-full border-none bg-transparent p-0 h-[100px] focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,512),[[k,o.value.description]])]),e("div",Se,[t[13]||(t[13]=e("label",{for:"bank",class:"block text-sm font-medium"},"Select Business Category",-1)),e("div",Be,[e("div",{onClick:t[2]||(t[2]=s=>l.value=!l.value),class:"flex items-center justify-between w-full p-3 border border-gray-300 rounded-lg bg-white cursor-pointer"},[e("span",{class:q(o.value.product_category?"text-gray-900 ":"text-gray-500 ")},x(o.value.product_category.toLocaleUpperCase()),3),d(g(J),{class:"w-4 h-4 text-gray-500"})]),l.value?(a(),u("div",Le,[e("div",je,[(a(),u(T,null,I(b,s=>e("button",{key:s.value,onClick:E(f=>$(s.value),["prevent"]),class:q(["w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center justify-between",{"text-blue-600 dark:text-blue-400 font-medium":s.value===o.value.product_category}])},[M(x(s.key)+" ",1),s.value===o.value.product_category?(a(),B(g(Q),{key:0,class:"w-4 h-4"})):y("",!0)],10,Ue)),64))])])):y("",!0)])]),e("label",Ve,[t[14]||(t[14]=e("span",{class:"text-xs font-medium text-gray-700"},"Business email",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.email=s),type:"text",placeholder:"@yourbusiness.com",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,512),[[k,o.value.email]])]),e("label",ze,[t[15]||(t[15]=e("span",{class:"text-xs font-medium text-gray-700"},"Business Phone",-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.phone_number=s),type:"text",placeholder:"09039939453",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,512),[[k,o.value.phone_number]])]),e("label",Me,[t[16]||(t[16]=e("span",{class:"text-xs font-medium text-gray-700"},"Business Website(optional)",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.website=s),type:"url",placeholder:"https://mywebsit.com",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,512),[[k,o.value.website]])]),e("div",qe,[e("div",null,[n.value?(a(),u("div",Ee)):(a(),u("button",Ae,"Create Business"))])])])])],32))]),_:1}))]),_:1})}}};export{Qe as default};
