import{r as c,G as D,o as L,c as r,e as S,b as e,z as b,A as h,v as i,F as y,q as w,K as $,p as v,k as n}from"./index-DNeNtjwR.js";import{_ as j}from"./HeaderNav.vue_vue_type_script_setup_true_lang-CgmBVfP3.js";import"./storeUtils-DUStbxJ3.js";import"./createLucideIcon-LynU3fMy.js";const B={class:"flex flex-col w-full max-w-6xl mx-auto p-5 gap-5"},R={class:"mb-5"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-6 h-full"},J={class:"bg-white rounded-lg shadow-md p-5 overflow-y-auto h-[calc(100vh-200px)] md:col-span-1"},z={key:0,class:"text-gray-500 py-4"},T={key:1,class:"bg-red-100 text-red-700 p-3 rounded-md mb-4"},G={key:2,class:"text-center py-8 text-gray-500"},K={key:3,class:"divide-y divide-gray-200"},O=["onClick"],Q={class:"p-4"},H={class:"font-medium text-gray-900"},I={class:"text-sm text-gray-500"},W={class:"bg-white rounded-lg shadow-md p-5 overflow-y-auto h-[calc(100vh-200px)] md:col-span-2"},X={key:0,class:"flex flex-col items-center justify-center h-full text-gray-500 p-8 text-center"},Y={key:1,class:"space-y-6"},Z={class:"text-xl font-semibold text-gray-800"},ee={class:"space-y-4"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},se=["id","checked","onChange"],le=["for"],ae={class:"flex space-x-3 mt-6"},oe={key:2,class:"space-y-6"},re={class:"flex justify-between items-center pb-4 border-b border-gray-200"},ne={class:"text-xl font-semibold text-gray-800"},ie={class:"flex space-x-2"},de={class:"space-y-3"},ue={class:"flex"},ce={class:"text-gray-800"},me={class:"flex"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},he={__name:"UserManagement",setup(ge){const d=c([]),a=c(null),p=c(!0),m=c(null),x=c(""),_=c([{id:1,name:"View Dashboard"},{id:2,name:"Manage Users"},{id:3,name:"Edit Content"},{id:4,name:"Delete Content"},{id:5,name:"Approve Posts"},{id:6,name:"Financial Reports"},{id:7,name:"System Settings"}]),u=c(!1),o=c({id:null,name:"",email:"",role:"",permissions:[]}),k=async()=>{p.value=!0,m.value=null;try{setTimeout(()=>{d.value=[{id:1,name:"John Doe",email:"john@example.com",role:"Editor",permissions:[1,3,5]},{id:2,name:"Jane Smith",email:"jane@example.com",role:"Admin",permissions:[1,2,3,4,5,6,7]},{id:3,name:"Bob Johnson",email:"bob@example.com",role:"Viewer",permissions:[1]},{id:4,name:"Alice Brown",email:"alice@example.com",role:"Manager",permissions:[1,3,5,6]}],p.value=!1},500)}catch(l){m.value="Failed to load users. Please try again later.",p.value=!1,console.error("Error fetching users:",l)}},U=l=>{a.value={...l},u.value=!1},C=()=>{o.value={...a.value},u.value=!0},E=async()=>{try{const l=d.value.findIndex(t=>t.id===o.value.id);l!==-1&&(d.value[l]={...o.value},a.value={...o.value}),u.value=!1}catch(l){m.value="Failed to update user. Please try again.",console.error("Error updating user:",l)}},V=async l=>{if(confirm("Are you sure you want to delete this user?"))try{d.value=d.value.filter(t=>t.id!==l),a.value=null}catch(t){m.value="Failed to delete user. Please try again.",console.error("Error deleting user:",t)}},A=l=>{o.value.permissions||(o.value.permissions=[]);const t=o.value.permissions.indexOf(l);t===-1?o.value.permissions.push(l):o.value.permissions.splice(t,1)},g=(l,t)=>{var s;return(s=l==null?void 0:l.permissions)==null?void 0:s.includes(t)},M=D(()=>{if(!x.value)return d.value;const l=x.value.toLowerCase();return d.value.filter(t=>t.name.toLowerCase().includes(l)||t.email.toLowerCase().includes(l)||t.role.toLowerCase().includes(l))}),N=()=>{o.value={id:Date.now(),name:"",email:"",role:"Viewer",permissions:[1]},a.value=null,u.value=!0},P=async()=>{try{const l={...o.value};d.value.push(l),a.value=l,u.value=!1}catch(l){m.value="Failed to create user. Please try again.",console.error("Error creating user:",l)}},F=()=>{u.value=!1,a.value&&(o.value={...a.value})};return L(()=>{k()}),(l,t)=>(n(),r(y,null,[S(j),e("div",B,[e("div",{class:"flex justify-between items-center mb-5"},[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-800"},"User Management",-1)),e("button",{onClick:N,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium"}," Add New User ")]),e("div",R,[b(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),placeholder:"Search users...",class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[h,x.value]])]),e("div",q,[e("div",J,[t[7]||(t[7]=e("h2",{class:"text-lg font-semibold mb-4 text-gray-700"},"Users",-1)),p.value?(n(),r("div",z,"Loading users...")):m.value?(n(),r("div",T,i(m.value),1)):d.value.length===0?(n(),r("div",G," No users found. Add a new user to get started. ")):(n(),r("ul",K,[(n(!0),r(y,null,w(M.value,s=>{var f;return n(),r("li",{key:s.id,onClick:pe=>U(s),class:v(["cursor-pointer transition-colors",((f=a.value)==null?void 0:f.id)===s.id?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50"])},[e("div",Q,[e("h3",H,i(s.name),1),e("p",I,i(s.email),1),e("span",{class:v(["inline-block mt-1 px-2 py-1 text-xs rounded-full",{"bg-purple-100 text-purple-800":s.role==="Admin","bg-blue-100 text-blue-800":s.role==="Manager","bg-green-100 text-green-800":s.role==="Editor","bg-gray-100 text-gray-800":s.role==="Viewer"}])},i(s.role),3)])],10,O)}),128))]))]),e("div",W,[!a.value&&!u.value?(n(),r("div",X,t[8]||(t[8]=[e("p",null,'Select a user to view details or click "Add New User" to create a new user.',-1)]))):u.value?(n(),r("div",Y,[e("h2",Z,i(o.value.id?"Edit User":"Create New User"),1),e("div",ee,[e("div",null,[t[9]||(t[9]=e("label",{for:"userName",class:"block text-sm font-medium text-gray-700 mb-1"},"Name",-1)),b(e("input",{id:"userName",type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.name=s),class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[h,o.value.name]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"userEmail",class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),b(e("input",{id:"userEmail",type:"email","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.email=s),class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[h,o.value.email]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"userRole",class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),b(e("select",{id:"userRole","onUpdate:modelValue":t[3]||(t[3]=s=>o.value.role=s),class:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"},t[11]||(t[11]=[e("option",{value:"Admin"},"Admin",-1),e("option",{value:"Manager"},"Manager",-1),e("option",{value:"Editor"},"Editor",-1),e("option",{value:"Viewer"},"Viewer",-1)]),512),[[$,o.value.role]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Permissions",-1)),e("div",te,[(n(!0),r(y,null,w(_.value,s=>(n(),r("div",{key:s.id,class:"flex items-center p-2 bg-gray-50 rounded-md"},[e("input",{type:"checkbox",id:`permission-${s.id}`,checked:g(o.value,s.id),onChange:f=>A(s.id),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,40,se),e("label",{for:`permission-${s.id}`,class:"ml-2 text-sm text-gray-700"},i(s.name),9,le)]))),128))])])]),e("div",ae,[e("button",{onClick:t[4]||(t[4]=s=>o.value.id?E():P()),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium"},i(o.value.id?"Update User":"Create User"),1),e("button",{onClick:F,class:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm font-medium"}," Cancel ")])])):(n(),r("div",oe,[e("div",re,[e("h2",ne,i(a.value.name),1),e("div",ie,[e("button",{onClick:C,class:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded-md text-sm"}," Edit "),e("button",{onClick:t[5]||(t[5]=s=>V(a.value.id)),class:"bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded-md text-sm"}," Delete ")])]),e("div",de,[e("div",ue,[t[14]||(t[14]=e("span",{class:"font-medium text-gray-600 w-24"},"Email:",-1)),e("span",ce,i(a.value.email),1)]),e("div",me,[t[15]||(t[15]=e("span",{class:"font-medium text-gray-600 w-24"},"Role:",-1)),e("span",{class:v(["inline-block px-2 py-1 text-xs rounded-full",{"bg-purple-100 text-purple-800":a.value.role==="Admin","bg-blue-100 text-blue-800":a.value.role==="Manager","bg-green-100 text-green-800":a.value.role==="Editor","bg-gray-100 text-gray-800":a.value.role==="Viewer"}])},i(a.value.role),3)])]),e("div",null,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-800 mb-3"},"Permissions",-1)),e("div",ve,[(n(!0),r(y,null,w(_.value,s=>(n(),r("div",{key:s.id,class:v(["flex items-center p-3 rounded-md",g(a.value,s.id)?"bg-green-50":"bg-gray-50"])},[e("span",{class:v(["inline-flex items-center justify-center w-6 h-6 rounded-full mr-2",g(a.value,s.id)?"bg-green-100 text-green-700":"bg-gray-200 text-gray-400"])},i(g(a.value,s.id)?"✓":"✗"),3),e("span",{class:v(["text-sm",g(a.value,s.id)?"text-green-700":"text-gray-500"])},i(s.name),3)],2))),128))])])]))])])])],64))}};export{he as default};
