import{d as V,r as d,o as B,D,c as m,b as s,y as M,l as x,z as f,A as w,B as q,n as h,u as y,p as _,v as k,g as I,x as O,k as u}from"./index-DTq0z6UM.js";import{S as T,n}from"./storeUtils-BBgzQjYe.js";import{R as U,b as S,L as $}from"./authenticationRequest-gtOJk9va.js";import{E as F,a as N}from"./eye-B7GVtcCM.js";import"./createLucideIcon-BHDqzYJA.js";const z={class:"min-h-screen flex flex-col bg-white"},A={class:"flex-1 flex flex-col items-center justify-center px-4 py-12"},L={class:"w-full max-w-md"},j={key:0,for:"login_email",class:"block mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-orange-600 focus-within:ring-1 focus-within:ring-orange-600"},Y={key:1},G={for:"verify_otp",class:"block relative mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-orange-600 focus-within:ring-1 focus-within:ring-orange-600"},H={for:"reset_password",class:"block relative mb-5 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-orange-600 focus-within:ring-1 focus-within:ring-orange-600"},J=["type"],K={class:"text-center"},Q=["disabled"],W=["disabled"],ae=V({__name:"ResetPassword",setup(X){const i=d(!1),v=T,a=d(!1),r=d(U),c=d(!1),l=d(120);let p=null;const P=t=>{const e=Math.floor(t/60),o=t%60;return`${e}:${o.toString().padStart(2,"0")}`},g=()=>{l.value=20,clearInterval(p),p=setInterval(()=>{l.value>0?l.value--:clearInterval(p)},1e3)},b=async()=>{var t;a.value=!0,S.email=r.value.email;try{const o=(await v.dispatch("auth","sendEmailOtp",S)).data;o.response_code==="00"?(a.value=!1,n(o.response_message,"success"),i.value=!0,g()):(n(o.response_message,"success"),a.value=!1)}catch(e){a.value=!1,(t=e==null?void 0:e.response)!=null&&t.data?n(String(e.response.data.message),"error"):n(String(e),"error")}},R=async()=>{a.value=!0;try{const t=await v.dispatch("auth","resetPassword",r.value);console.log(t);let e=t.data;a.value=!1,e.code==="00"?(n(e.message,"success"),$.email=r.value.email,await O.push({path:"/login"})):n(e.message,"error")}catch(t){a.value=!1,console.log("error:",t),n(String(t),"error")}},C=()=>{l.value>0||(g(),b())},E=()=>{i.value?R():b()};return B(()=>{}),D(()=>{clearInterval(p)}),(t,e)=>(u(),m("div",z,[s("div",A,[s("div",L,[e[7]||(e[7]=s("div",{class:"text-center lg:mb-8 mb-4"},[s("a",{href:"/",class:"lg:text-3xl text-lg font-bold bg-gradient-to-r from-[#F97316] to-[#2563EB] text-transparent bg-clip-text inline-block lg:mb-4 mb-2"}," Aza-pal "),s("h1",{class:"lg:text-2xl text-lg font-bold text-gray-900 mb-2"},"Reset Your Password")],-1)),s("form",{onSubmit:M(E,["prevent"]),class:"space-y-5"},[i.value?x("",!0):(u(),m("label",j,[e[4]||(e[4]=s("span",{class:"text-xs font-medium text-gray-700"}," email ",-1)),f(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>r.value.email=o),id:"login_email",placeholder:"example@email.com",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm",required:""},null,512),[[w,r.value.email]])])),i.value?(u(),m("div",Y,[s("label",G,[e[5]||(e[5]=s("span",{class:"text-xs font-medium text-gray-700"}," OTP ",-1)),f(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.otp=o),id:"verify_otp",placeholder:"enter value",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,512),[[w,r.value.otp]])]),s("label",H,[e[6]||(e[6]=s("span",{class:"text-xs font-medium text-gray-700"}," password ",-1)),f(s("input",{type:c.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.password=o),id:"reset_password",placeholder:"********",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm"},null,8,J),[[q,r.value.password]]),s("span",{class:"absolute top-8 right-5 cursor-pointer",onClick:e[3]||(e[3]=o=>c.value=!c.value)},[c.value?(u(),h(y(F),{key:0})):(u(),h(y(N),{key:1}))])]),s("div",K,[s("button",{onClick:C,disabled:l.value>0,class:_(["text-orange-500 hover:text-orange-700 font-medium focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",{"opacity-50 cursor-not-allowed":l.value>0}]),style:{color:"#F97316"}},k(l.value>0?`Resend Code in ${P(l.value)}`:"Resend Code"),11,Q)])])):x("",!0),s("button",{type:"submit",class:_(`w-full bg-[#F97316] disabled:cursor-not-allowed hover:bg-orange-400 rounded-[12px] p-[8px] cursor-pointer text-white ${a.value&&"cursor-pointer:not-allowed"}`),disabled:a.value},k(a.value?"Please chillax, it's working.":i.value?"Proceed":"Send Verification Email"),11,W)],32),e[8]||(e[8]=s("div",{class:"text-center mt-6"},[s("p",{class:"text-gray-600"},[I(" Never mind? "),s("a",{href:"/login",class:"text-[#F97316] font-medium"}," Cancel ")])],-1))])])]))}});export{ae as default};
