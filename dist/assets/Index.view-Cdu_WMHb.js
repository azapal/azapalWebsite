import{_ as N,r as n,o as D,a as S,c as r,e as C,l as c,u as p,b as e,y as M,z as b,K as U,A as F,f as j,F as B,k as i}from"./index-DTq0z6UM.js";import{_ as T}from"./HeaderNav.vue_vue_type_script_setup_true_lang-C1TlxRfI.js";import{S as V}from"./storeUtils-BBgzQjYe.js";import"./createLucideIcon-BHDqzYJA.js";const P={full_name:"",document_type:"",file:null},q={key:0,class:"w-full h-[100%] border fixed bg-white/70 z-40 top-0 right-0 left-0 bottom-0 flex items-center justify-center"},z={key:1,class:"relative flex justify-center items-center"},E={class:"sm:max-w-lg w-full p-5 bg-white rounded-xl z-10"},R={class:"grid grid-cols-1 space-y-2"},A={class:"grid grid-cols-1 space-y-2"},L={for:"id_full_name",class:"block overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600"},O={key:2,class:"w-full flex justify-center items-center"},$={class:"w-full flex flex-col items-center"},G={key:0,class:"flex lg:w-[30%] relative w-full flex-col justify-center items-center m-2"},H={key:1,class:"h-full flex relative flex-col justify-center items-center"},K=["src"],W={__name:"Index.view",setup(Y){let v=n("1");const u=n(null),s=n(null);let d=n(null),f=null;const a=n(P),g=n(!1),m=V,h=m.get("documents","getIdDocument"),x=o=>{const t=new SpeechSynthesisUtterance(o);t.lang="en-US",t.rate=1,speechSynthesis.speak(t)},y=async()=>{v.value="2";try{f=await navigator.mediaDevices.getUserMedia({video:!0}),u.value.srcObject=f,x("Take a selfie with your Identification Document on your right hand"),speechSynthesis.cancle()}catch(o){o.name==="NotAllowedError"&&alert("Please allow camera access.")}},w=()=>{f&&f.getTracks().forEach(o=>o.stop())},_=()=>{const o=s.value.getContext("2d");s.value.width=u.value.videoWidth,s.value.height=u.value.videoHeight,o.drawImage(u.value,0,0,s.value.width,s.value.height);const t=a.value.full_name+"-"+a.value.document_type;d.value=s.value.toDataURL("image/png"),s.value.toBlob(l=>{l&&(a.value.file=new File([l],`${t.replaceAll(" ","_").toLowerCase()}.png`,{type:l.type,lastModified:new Date().getTime()}))},"image/png"),x("Good!"),w()},k=()=>{d.value=null,y()},I=()=>{console.log("upload photo",a.value),g.value=!0;const o=new FormData;o.append("file",a.value.file),o.append("full_name",a.value.full_name),o.append("document_type",a.value.document_type),h.value?m.dispatch("documents","updateId",{id:h.value[0].id,file:o}):m.dispatch("documents","uploadId",o),g.value=!1};return D(()=>{m.dispatch("documents","readId")}),S(w),(o,t)=>(i(),r(B,null,[C(T),g.value?(i(),r("div",q," Processing.... we would redirect you once the upload is sucessfull ")):c("",!0),p(v)==="1"?(i(),r("div",z,[e("div",E,[t[6]||(t[6]=e("div",{class:"text-left"},[e("h2",{class:"text-xl font-bold text-gray-900"}," Document Verification "),e("p",{class:"mt-2 text-sm text-gray-400"},"Our system checks against impersonations, be sure to type in your name as it appears on your verification documents. ")],-1)),e("form",{onSubmit:M(y,["prevent"]),class:"mt-5 space-y-3"},[e("div",R,[t[3]||(t[3]=e("label",{class:"text-sm font-bold text-gray-500 tracking-wide"},"Select Document Type",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.document_type=l),class:"p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500",required:""},t[2]||(t[2]=[e("option",null,"National Identification Number(NIN)",-1),e("option",null,"International Passport",-1)]),512),[[U,a.value.document_type]])]),e("div",A,[e("label",L,[t[4]||(t[4]=e("span",{class:"text-xs font-medium text-gray-700"}," Full Name ",-1)),b(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>a.value.full_name=l),id:"id_full_name",placeholder:"Your Full Name",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm",required:""},null,512),[[F,a.value.full_name]])])]),t[5]||(t[5]=e("div",null,[e("button",{type:"submit",class:"w-full bg-[#F97316] hover:bg-orange-400 rounded-[12px] p-[8px] cursor-pointer text-white"},"Next")],-1))],32)])])):c("",!0),p(v)==="2"?(i(),r("div",O,[e("div",$,[t[7]||(t[7]=j('<div class="lg:w-[30%] mt-6 mb-3 w-[90%] flex items-start space-x-3 p-4 bg-white rounded-xl border border-gray-200" data-v-7b96f4a9><div class="p-1 bg-blue-100 rounded-full" data-v-7b96f4a9><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-7b96f4a9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-7b96f4a9></path></svg></div><div data-v-7b96f4a9><h3 class="text-sm font-medium text-gray-900" data-v-7b96f4a9>Touch the center of your screen to capture selfie</h3><p class="mt-1 text-xs text-gray-500" data-v-7b96f4a9> Take a selfie with your identification document on your right hand. </p></div></div>',1)),p(d)?c("",!0):(i(),r("div",G,[e("video",{ref_key:"video",ref:u,autoplay:""},null,512),e("button",{onClick:_,class:"w-[55%] h-[55%] m-3 absolute rounded-[12px] p-[8px] cursor-pointer text-white"}),e("canvas",{ref_key:"canvas",ref:s,style:{display:"none"}},null,512)])),p(d)?(i(),r("div",H,[e("img",{src:p(d),alt:"Captured Photo"},null,8,K),e("div",{class:"flex gap-3 items-center mt-5 w-[95%]"},[e("button",{onClick:k,class:"mt-3 w-full bg-[#2563EB] rounded-[12px] p-[8px] cursor-pointer text-white"},"Retake"),e("button",{onClick:I,class:"mt-3 w-full bg-[#F97316] hover:bg-orange-400 rounded-[12px] p-[8px] cursor-pointer text-white"},"Upload Photo")])])):c("",!0)])])):c("",!0)],64))}},ee=N(W,[["__scopeId","data-v-7b96f4a9"]]);export{ee as default};
