var ee=Object.defineProperty;var te=(g,n,s)=>n in g?ee(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s;var S=(g,n,s)=>te(g,typeof n!="symbol"?n+"":n,s);import{_ as K,E as se,r as f,G as B,j as ne,c as d,k as a,l as _,u as v,y as oe,b as e,z as j,A as I,H as re,g as h,e as C,i as $,n as L,v as i,F as P,q as Q,p as k,s as ae,x as ie,o as le}from"./index-DNeNtjwR.js";import{_ as A}from"./button.vue_vue_type_script_setup_true_lang-D4PGN_RA.js";import{S as W}from"./storeUtils-DUStbxJ3.js";import{c as Z}from"./createLucideIcon-LynU3fMy.js";import{T as de}from"./truck-C4jaVmq5.js";import{_ as ue}from"./DashboardLayout-DoTHbLAQ.js";import"./HeaderNav.vue_vue_type_script_setup_true_lang-CgmBVfP3.js";import"./menu-DeLOEffq.js";import"./chevron-left-Dg-Hnwsx.js";import"./check-check-DKTpYOuc.js";/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=Z("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=Z("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);class U{}S(U,"businessLookup",{amount:null,business_identification_name:null,remarks:null}),S(U,"initialisePayment",{amount:null,business_identification_name:null,remarks:null});const me={for:"business",class:"block mb-1 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600 dark:border-gray-700 dark:bg-gray-800"},pe={key:0,class:"flex items-center gap-2 pt-2 pb-2 bg-white"},be={for:"amount",class:"block mb-1 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600 dark:border-gray-700 dark:bg-gray-800"},ye=["disabled","required"],fe={for:"remarks",class:"block mb-1 overflow-hidden rounded-md border border-gray-200 px-3 py-2 shadow-xs focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600 dark:border-gray-700 dark:bg-gray-800"},ge={class:"mt-3"},xe={class:"text-xs"},ve={class:"flex gap-3 mt-3 items-center justify-end w-full"},_e={class:"flex justify-center py-4"},he={key:0,class:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"},ke={key:1,class:""},we={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},$e={class:"flex items-center justify-between"},Ce={class:"flex items-center"},De={class:"w-10 h-10 rounded-full bg-purple/20 flex items-center justify-center"},Te={class:"text-purple font-bold"},je={class:"ml-3"},Se={class:"font-medium"},Ie={class:"text-xs text-gray-500"},Ae={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},Be={class:"grid grid-cols-2 gap-2"},Pe=["onClick"],Ue={class:"font-medium"},Le={class:"text-sm text-gray-600"},Fe={key:0,class:"text-center text-gray-500 py-2"},Me={class:"bg-white rounded-lg shadow-sm p-4 mb-4"},Re={class:"space-y-3"},Ve={class:"flex justify-between items-center"},qe={class:"font-semibold"},ze={class:"flex justify-between items-center"},Ne={class:"font-semibold"},Ee={class:"flex justify-between items-center"},Ge={key:0,class:"text-xs text-red-500"},He={class:"flex justify-between items-center"},Je={class:"font-bold text-lg"},Oe={class:"grid grid-cols-2 gap-4"},Xe={__name:"SendMoney",setup(g){const n=W,s=se(U.businessLookup),l=f(null),x=f(!1),u=f(1e3);f(0),f(0);const m=f(!1),r=n.get("pay","getLookUp");function p(w){console.log(w),l.value=w,u.value=1e3}const o=B(()=>parseFloat(r.value.initial_amount)+parseFloat(r.value.protection_fee)+parseFloat(u.value));async function b(){x.value=!0,console.log(m.value),m.value&&(s.amount=null),await n.dispatch("pay","businessLookup",s),x.value=!1}function y(){var t,T;if(!l.value){alert("Please select a delivery area");return}const w={business_identification_name:(T=(t=r.value)==null?void 0:t.business)==null?void 0:T.business_identification_name,amount:o.value,remarks:s.remarks};console.log(w),n.dispatch("pay","initializePayment",w)}function D(){s.business_identification_name="",l.value=null,u.value=0,n.commit("pay","lookup",null)}return(w,t)=>{var F,M,R,V,q,z,N,E,G,H,J,O;const T=ne("router-link");return a(),d(P,null,[v(r)?_("",!0):(a(),d("form",{key:0,onSubmit:oe(b,["prevent"]),class:"p-3"},[e("label",me,[t[4]||(t[4]=e("span",{class:"text-xs font-medium text-gray-700 dark:text-gray-200"},"Business",-1)),j(e("input",{type:"text",id:"Username","onUpdate:modelValue":t[0]||(t[0]=c=>s.business_identification_name=c),placeholder:"@businessname",required:"",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm dark:text-white"},null,512),[[I,s.business_identification_name]]),t[5]||(t[5]=e("span",{class:"text-xs text-gray-400"},"Use business username to send money",-1))]),((F=s==null?void 0:s.business_identification_name)==null?void 0:F.length)>3?(a(),d("div",pe,[j(e("input",{type:"checkbox",id:"paidCheckbox","onUpdate:modelValue":t[1]||(t[1]=c=>m.value=c),class:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"},null,512),[[re,m.value]]),t[6]||(t[6]=e("label",{for:"paidCheckbox",class:"text-gray-700 text-sm font-medium cursor-pointer select-none"}," I have already paid this business(just delivery need) ",-1))])):_("",!0),e("label",be,[t[7]||(t[7]=e("span",{class:"text-xs font-medium text-gray-700 dark:text-gray-200"},"Amount",-1)),j(e("input",{type:"tel",id:"amount",disabled:m.value,"onUpdate:modelValue":t[2]||(t[2]=c=>s.amount=c),placeholder:"",required:!m.value,class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm dark:text-white"},null,8,ye),[[I,s.amount]])]),e("label",fe,[t[8]||(t[8]=e("span",{class:"text-xs font-medium text-gray-700 dark:text-gray-200"},"Remarks",-1)),j(e("input",{type:"tel",id:"remarks","onUpdate:modelValue":t[3]||(t[3]=c=>s.remarks=c),placeholder:"Payment for nike shoes limited editions 2025",required:"",class:"mt-1 w-full border-none bg-transparent p-0 focus:border-transparent focus:ring-0 focus:outline-hidden sm:text-sm dark:text-white"},null,512),[[I,s.remarks]])]),e("div",ge,[e("p",xe,[t[10]||(t[10]=h("You must ")),C(T,{to:"/identity-verification",class:"text-blue-500"},{default:$(()=>t[9]||(t[9]=[h("Add a Bank Information")])),_:1}),t[11]||(t[11]=h(" before you can send money"))]),e("div",ve,[e("div",_e,[x.value?(a(),d("div",he)):(a(),L(A,{key:1,type:"submit",variant:"outline"},{child:$(()=>[h('Look up "'+i(s.business_identification_name)+'"',1)]),_:1}))])])])],32)),v(r)?(a(),d("div",ke,[e("div",we,[e("div",$e,[e("div",Ce,[e("div",De,[e("span",Te,i((V=(R=(M=v(r))==null?void 0:M.business)==null?void 0:R.name)==null?void 0:V.substring(0,2).toUpperCase()),1)]),e("div",je,[e("p",Se,"Payment to "+i((z=(q=v(r))==null?void 0:q.business)==null?void 0:z.name),1),e("p",Ie,i((N=v(r))==null?void 0:N.business_identification_name),1)])]),t[12]||(t[12]=e("div",{class:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"}," Protected ",-1))])]),e("div",Ae,[t[13]||(t[13]=e("h3",{class:"font-medium mb-3"},"Select Delivery Area",-1)),e("div",Be,[(a(!0),d(P,null,Q((E=v(r))==null?void 0:E.areas,c=>{var X;return a(),d("button",{key:c.id,type:"button",onClick:ht=>p(c),class:k(["p-3 border rounded-lg text-left transition-colors",((X=l.value)==null?void 0:X.id)===c.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"])},[e("div",Ue,i(c.area),1),e("div",Le,"+$"+i(c.charge),1)],10,Pe)}),128))]),((H=(G=v(r))==null?void 0:G.areas)==null?void 0:H.length)===0&&!x.value?(a(),d("p",Fe," No delivery areas available ")):_("",!0)]),e("div",Me,[e("div",Re,[e("div",Ve,[t[14]||(t[14]=e("span",{class:"text-sm text-gray-600"},"Amount",-1)),e("span",qe,"$"+i((J=v(r))==null?void 0:J.initial_amount),1)]),e("div",ze,[t[15]||(t[15]=e("span",{class:"text-sm text-gray-600"},"Protection Fee",-1)),e("span",Ne,"$"+i((O=v(r))==null?void 0:O.protection_fee),1)]),e("div",Ee,[t[16]||(t[16]=e("span",{class:"text-sm text-gray-600"},"Delivery",-1)),e("span",{class:k(["font-semibold",{"text-orange-500":l.value}])},[l.value?_("",!0):(a(),d("span",Ge,"(based on your current location)")),h(" $"+i(u.value),1)],2)]),t[18]||(t[18]=e("div",{class:"h-px bg-gray-200 my-2"},null,-1)),e("div",He,[t[17]||(t[17]=e("span",{class:"font-medium"},"Total",-1)),e("span",Je,"$"+i(o.value),1)])])]),e("div",Oe,[C(A,{onClick:D,class:"bg-gray-100 hover:bg-gray-200 py-3 rounded-lg font-medium transition-colors"},{child:$(()=>[t[19]||(t[19]=h(" Cancel "))]),_:1}),C(A,{onClick:y,disabled:!l.value,class:k(["py-3 rounded-lg font-medium transition-colors",l.value?"bg-[#F97316] hover:bg-[#EA580C] text-white":"bg-[#F97316]/50 text-white cursor-not-allowed"])},{child:$(()=>[t[20]||(t[20]=h(" Pay Securely "))]),_:1},8,["disabled","class"])])])):_("",!0)],64)}}},Ye=K(Xe,[["__scopeId","data-v-c86bfa9d"]]),Ke=["onClick"],Qe={class:"flex items-center"},We={class:"ml-2"},Ze={class:"font-semibold ml-1"},et={key:0,class:"transition-all duration-300 ease-in-out"},tt={class:"p-4 space-y-3"},st={class:"flex justify-between items-center"},nt={class:"font-medium"},ot={class:"flex justify-between items-center"},rt={class:"font-medium"},at={class:"flex justify-between items-center"},it={class:"font-medium"},lt={class:"flex justify-between items-center pt-3 border-t border-gray-200 mt-2"},dt={class:"text-lg font-bold"},ut={__name:"TransactionCard",props:{data:Array},setup(g){const n=g,s=f(),l=f(!1),x=f({settlementCode:"TRX-29384",dispatchRider:"John Doe",seller:"Tech Store Inc.",amount:149.99,status:"In Transit",date:"2025-04-05"}),u=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),m=p=>{switch(p){case"Delivered":return"bg-green-100 text-green-800";case"Disputed":return"bg-red-100 text-red-800";case"In Transit":return"bg-blue-100 text-blue-800";case"Resolved":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},r=p=>{switch(p){case"Delivered":return Y;case"Disputed":return ce;case"In Transit":return de;case"Resolved":return Y;default:return null}};return B(()=>["Disputed","In Transit","Delivered"].includes(x.value.status)),B(()=>["In Transit","Delivered"].includes(x.value.status)&&x.value.status!=="Disputed"),(p,o)=>(a(!0),d(P,null,Q(n.data,(b,y)=>(a(),d("div",{class:"bg-white rounded-lg overflow-hidden border border-gray-200 mb-3",key:y},[e("div",{onClick:D=>(l.value=!l.value,s.value=y),class:"bg-gray-50 px-4 py-3 flex justify-between items-center border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors"},[e("div",Qe,[e("div",{class:k(["transform transition-transform",l.value&&s.value===y?"rotate-90":""])},o[0]||(o[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),2),e("div",We,[o[1]||(o[1]=e("span",{class:"text-gray-500 text-sm"},"Settlement Code:",-1)),e("span",Ze,i(b.sender_settlement_code),1)])]),e("div",{class:k([m(b.status),"flex items-center px-2 py-1 rounded-md text-sm font-medium"])},[(a(),L(ae(r(b.status)),{class:"w-4 h-4 mr-1"})),e("span",null,i(b.status),1)],2)],8,Ke),l.value&&s.value===y?(a(),d("div",et,[e("div",tt,[e("div",st,[o[2]||(o[2]=e("span",{class:"text-gray-500 text-sm"},"Dispatch Rider:",-1)),e("span",nt,i(b.dispatch_code),1)]),e("div",ot,[o[3]||(o[3]=e("span",{class:"text-gray-500 text-sm"},"Seller:",-1)),e("span",rt,i(b.business_id),1)]),e("div",at,[o[4]||(o[4]=e("span",{class:"text-gray-500 text-sm"},"Date:",-1)),e("span",it,i(u(b.created_at)),1)]),e("div",lt,[o[5]||(o[5]=e("span",{class:"text-gray-500 text-sm"},"Total Amount:",-1)),e("span",dt,"$"+i(b.total_amount.toFixed(2)),1)])])])):_("",!0)]))),128))}},ct={class:"min-h-screen lg:pt-2 md:pt-2"},mt={class:"flex flex-col gap-2 lg:max-w-md md:max-w-xl mx-auto dark:bg-gray-800 overflow-hidden"},pt={class:"shadow-sm bg-white rounded"},bt={class:"px-4 mt-4"},yt={class:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700"},ft={class:"p-4"},gt={key:0,class:"w-full"},xt={key:1,class:"w-full"},vt={class:"text-center text-gray-500 dark:text-gray-400"},_t={__name:"Dashboard.view",setup(g){var m,r,p,o;let n;n=(p=(r=(m=ie)==null?void 0:m.currentRoute)==null?void 0:r.value)==null?void 0:p.query.reference;const s=W,l=s.get("business","getBusiness");s.get("auth","getCurrentUser");const x=s.get("pay","getTransactions");f(!1);const u=f("send_money");return(o=Object==null?void 0:Object.keys(l))==null||o.length,le(()=>{if(console.log(n),s.dispatch("business","readBusiness"),s.dispatch("pay","getInitializePayment"),n)return s.dispatch("pay","verifyTransaction",{reference:n})}),(b,y)=>(a(),L(ue,null,{content:$(()=>[e("div",ct,[e("div",mt,[e("div",pt,[e("div",bt,[e("div",yt,[e("button",{onClick:y[0]||(y[0]=D=>u.value="send_money"),class:k(["inline-flex items-center px-4 py-3 text-sm font-medium whitespace-nowrap focus:outline-none",u.value==="send_money"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 border-b-2 border-transparent hover:border-gray-300"])}," Send Money ",2),e("button",{onClick:y[1]||(y[1]=D=>u.value="transaction"),class:k(["inline-flex items-center px-4 py-3 text-sm font-medium whitespace-nowrap focus:outline-none",u.value==="transaction"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 border-b-2 border-transparent hover:border-gray-300"])}," Transactions ",2)])]),e("div",ft,[u.value==="send_money"?(a(),d("div",gt,[C(Ye)])):_("",!0),u.value==="transaction"?(a(),d("div",xt,[e("div",vt,[C(ut,{data:v(x)},null,8,["data"])])])):_("",!0)])])])])]),_:1}))}},Pt=K(_t,[["__scopeId","data-v-e741b80b"]]);export{Pt as default};
